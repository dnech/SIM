var winston = require('winston');
var path = require('path');

function makeLogger(cfg, module){
    var transports = [];
	
	var scriptname = path.basename(module.filename);
	
    if (cfg.log.console.enable){
        transports.push(new winston.transports.Console({timestamp: true, colorize: true, level: cfg.log.console.level, label: scriptname}));
    }

    if (cfg.log.file.enable){
        transports.push(new winston.transports.File({filename:cfg.log.file.filename, level:cfg.log.file.level, label: scriptname}));
    }
    return  new winston.Logger({transports: transports});
}

module.exports = makeLogger;